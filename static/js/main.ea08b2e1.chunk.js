(this["webpackJsonplogic-gate-simulator"]=this["webpackJsonplogic-gate-simulator"]||[]).push([[0],{21:function(n,t,e){n.exports=e(34)},26:function(n,t,e){},34:function(n,t,e){"use strict";e.r(t);var o=e(0),i=e.n(o),r=e(9),s=e.n(r),a=(e(26),e(2)),c=e(3),u=e(5),d=e(4),l=e(16),f=e(6),m=e(17),p=e.n(m),v=e(11),h=function(n){Object(u.a)(e,n);var t=Object(d.a)(e);function e(){var n;Object(a.a)(this,e);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(n=t.call.apply(t,[this].concat(i))).toggleSwitch=function(){n.props.nodeInfo.switchEnabled=!n.props.nodeInfo.switchEnabled,n.props.simulate()},n}return Object(c.a)(e,[{key:"render",value:function(){var n=this,t=this.props,e=t.nodeInfo,o=t.connections;return i.a.createElement(p.a,{handle:".node__container",defaultPosition:e.defaultPos,positionOffset:this.props.positionOffset},i.a.createElement("div",{className:"node",id:e.id},i.a.createElement("div",{className:"node__container "+(e.status?"node__container--active":""),onContextMenu:function(){return n.props.removeNode()}},i.a.createElement("div",{className:"node__name"},e.nodeType.name),null!==e.nodeType.svg&&i.a.createElement("div",{className:"node__svg "+(e.status?"node__svg--active":"")},i.a.createElement(v.a,{src:"assets/".concat(e.nodeType.svg)})),e.nodeType.hasSwitch&&i.a.createElement("div",{className:"switch "+(e.switchEnabled?"switch--active":""),onClick:function(){return n.toggleSwitch()}},i.a.createElement("div",{className:"switch__inner"}))),i.a.createElement("div",{className:"node__inputs"},e.inputs.map((function(t,r){return i.a.createElement("div",{key:r,id:t,className:"node__point "+(e.hasIncomingConnectionsOnPort(t,o)?"node__point--filled":""),onMouseUp:function(e){return n.props.connectLine(t)},onContextMenu:function(){return n.props.removeConnections(t)}})}))),i.a.createElement("div",{className:"node__outputs"},e.outputs.map((function(t,e){return i.a.createElement("div",{key:e,id:t,className:"node__point node__point--filled",onMouseDown:function(){return n.props.startLine(t)},onContextMenu:function(){return n.props.removeConnections(t)}})})))))}}]),e}(o.Component),g=e(36),y={INPUT:{inputs:0,outputs:1,name:"INPUT",hasSwitch:!0,transform:function(n,t){return t},key:"i",svg:null},OUTPUT:{inputs:1,outputs:0,name:"OUTPUT",hasSwitch:!1,transform:function(n,t){return n[0]},key:"u",svg:null},NOT_GATE:{inputs:1,outputs:1,name:"NOT-GATE",hasSwitch:!1,transform:function(n,t){return!n[0]},key:"n",svg:"not.svg"},AND_GATE:{inputs:2,outputs:1,name:"AND-GATE",hasSwitch:!1,transform:function(n,t){return n[0]&&n[1]},key:"a",svg:"and.svg"},NAND_GATE:{inputs:2,outputs:1,name:"NAND-GATE",hasSwitch:!1,transform:function(n,t){return!(n[0]&&n[1])},key:"A",svg:"nand.svg"},OR_GATE:{inputs:2,outputs:1,name:"OR-GATE",hasSwitch:!1,transform:function(n,t){return n[0]||n[1]},key:"o",svg:"or.svg"},NOR_GATE:{inputs:2,outputs:1,name:"NOR-GATE",hasSwitch:!1,transform:function(n,t){return!(n[0]||n[1])},key:"N",svg:"nor.svg"},XOR_GATE:{inputs:2,outputs:1,name:"XOR-GATE",hasSwitch:!1,transform:function(n,t){return n[0]^n[1]},key:"x",svg:"xor.svg"},XNOR_GATE:{inputs:2,outputs:1,name:"XNOR-GATE",hasSwitch:!1,transform:function(n,t){return!(n[0]^n[1])},key:"X",svg:"xnor.svg"}},N=function n(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(g.a)(),r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(a.a)(this,n),this.hasIncomingConnectionsOnPort=function(n,t){return void 0!==t.find((function(t){return t.to.id===n}))},this.getProcessedInput=function(n){var t=n.filter((function(n){return n.to.nodeInfo.id===e.id})).map((function(n){return n.from.nodeInfo.status}));return[].concat(Object(f.a)(t),Object(f.a)(Array(e.nodeType.inputs-t.length).fill(!1)))},this.simulate=function(n){e.status=e.nodeType.transform(e.getProcessedInput(n),e.switchEnabled)},this.getStorageObject=function(){if(null===document.getElementById(e.id))return null;var n=document.getElementById(e.id).getBoundingClientRect();return{id:e.id,nodeTypeKey:Object.keys(y).find((function(n){return y[n]===e.nodeType})),pos:{x:n.x,y:n.y},status:e.status,switchEnabled:e.switchEnabled}},this.id=i,this.nodeType=t,this.defaultPos=o,this.switchEnabled=s,this.status=r,this.inputs=[],this.outputs=[];for(var c=0;c<t.inputs;c++)this.inputs.push("NODE-".concat(this.id,"_INPUT-").concat(c));for(var u=0;u<t.outputs;u++)this.outputs.push("NODE-".concat(this.id,"_OUTPUT-").concat(u))},w=function(n){Object(u.a)(e,n);var t=Object(d.a)(e);function e(){var n;Object(a.a)(this,e);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(n=t.call.apply(t,[this].concat(i))).state={points:"",connections:[],nodes:[]},n.fromNode=null,n.loadedFromLocalStorage=!1,n.startLine=function(t,e){n.fromNode={nodeInfo:t,id:e}},n.mouseMove=function(t,e){if(null!==n.fromNode){var o=document.getElementById(n.fromNode.id).getBoundingClientRect(),i=o.x,r=o.y,s=o.width,a=o.height;n.setState({points:"".concat(i+s/2,",").concat(r+a/2," ").concat(t,",").concat(e)})}},n.mouseUp=function(){n.fromNode=null,n.setState({points:""})},n.connectLine=function(t,e){null!==n.fromNode&&(void 0===n.state.connections.find((function(n){return n.to.id===e}))&&n.setState({points:"",connections:[].concat(Object(f.a)(n.state.connections),[{from:n.fromNode,to:{nodeInfo:t,id:e}}])},(function(){return n.simulate()})),n.fromNode=null)},n.getConnectionLineOfConnection=function(n){if(null===document.getElementById(n.from.id)||null===document.getElementById(n.to.id))return"";var t=document.getElementById(n.from.id).getBoundingClientRect(),e=document.getElementById(n.to.id).getBoundingClientRect();return"".concat(t.x+t.width/2,",").concat(t.y+t.height/2," ").concat(e.x+e.width/2,",").concat(e.y+e.height/2)},n.simulate=function(){for(var t=0;t<50;t++){var e,o=JSON.stringify(n.state.nodes.map((function(n){return n.status}))),i=Object(l.a)(n.state.nodes);try{for(i.s();!(e=i.n()).done;){e.value.simulate(n.state.connections)}}catch(r){i.e(r)}finally{i.f()}if(o===JSON.stringify(n.state.nodes.map((function(n){return n.status}))))break}n.setState({})},n.removeConnection=function(t){null===n.fromNode&&n.setState({connections:n.state.connections.filter((function(n){return n!==t}))},(function(){return n.simulate()}))},n.removeConnections=function(t){null===n.fromNode&&n.setState({connections:n.state.connections.filter((function(n){return n.from.id!==t&&n.to.id!==t}))},(function(){return n.simulate()}))},n.getConnectionStorageObject=function(n){return{fromNodeId:n.from.nodeInfo.id,fromPointId:n.from.id,toNodeId:n.to.nodeInfo.id,toPointId:n.to.id}},n.save=function(){if(n.loadedFromLocalStorage){var t=JSON.stringify(n.state.nodes.map((function(n){return n.getStorageObject()})).filter((function(n){return null!==n})));localStorage.setItem("nodes",t);var e=JSON.stringify(n.state.connections.map((function(t){return n.getConnectionStorageObject(t)})));localStorage.setItem("connections",e)}},n.load=function(){var t=[],e=[];null!==localStorage.getItem("nodes")&&(t=JSON.parse(localStorage.getItem("nodes")).map((function(n){return new N(y[n.nodeTypeKey],n.pos,n.id,n.status,n.switchEnabled)}))),null!==localStorage.getItem("connections")&&(e=JSON.parse(localStorage.getItem("connections")).map((function(n){return{from:{nodeInfo:t.find((function(t){return t.id===n.fromNodeId})),id:n.fromPointId},to:{nodeInfo:t.find((function(t){return t.id===n.toNodeId})),id:n.toPointId}}}))),n.setState({nodes:t,connections:e},(function(){n.loadedFromLocalStorage=!0,n.simulate()}))},n.addNewNode=function(t){var e=n.props.position,o=e.x,i=e.y;o=-o+Math.floor(window.innerWidth/2)-100,i=-i+Math.floor(window.innerHeight/2)-50,n.setState({nodes:[].concat(Object(f.a)(n.state.nodes),[new N(t,{x:o,y:i})])},(function(){return n.simulate()}))},n.removeNode=function(t){n.setState({nodes:n.state.nodes.filter((function(n){return n.id!==t})),connections:n.state.connections.filter((function(n){return n.from.nodeInfo.id!==t&&n.to.nodeInfo.id!==t}))},(function(){return n.simulate()}))},n}return Object(c.a)(e,[{key:"componentDidMount",value:function(){var n=this;this.load(),window.addEventListener("keydown",(function(t){var e=Object.values(y).find((function(n){return n.key===t.key}));void 0!==e&&n.addNewNode(e)}))}},{key:"render",value:function(){var n=this;return this.save(),i.a.createElement("div",{className:"desktop",onMouseMove:function(t){return n.mouseMove(t.clientX,t.clientY)},onMouseUp:function(){return n.mouseUp()},onContextMenu:function(n){return n.preventDefault()}},i.a.createElement("svg",{className:"line"},i.a.createElement("polyline",{points:this.state.points})),this.state.connections.map((function(t){return{connection:t,line:n.getConnectionLineOfConnection(t)}})).map((function(t,e){var o=t.connection,r=t.line;return i.a.createElement("svg",{className:"line "+(o.from.nodeInfo.status?"line--active":""),key:e},i.a.createElement("polyline",{points:r,onContextMenu:function(){return n.removeConnection(o)}}))})),this.state.nodes.map((function(t){return i.a.createElement(h,{key:t.id,startLine:function(e){return n.startLine(t,e)},connectLine:function(e){return n.connectLine(t,e)},removeConnections:function(t){return n.removeConnections(t)},removeNode:function(){return n.removeNode(t.id)},nodeInfo:t,connections:n.state.connections,simulate:function(){return n.simulate()},positionOffset:n.props.position})})))}}]),e}(o.Component),E=function(n){Object(u.a)(e,n);var t=Object(d.a)(e);function e(){return Object(a.a)(this,e),t.apply(this,arguments)}return Object(c.a)(e,[{key:"render",value:function(){var n=this;return i.a.createElement("div",{className:"sidebar"},Object.values(y).map((function(t,e){return i.a.createElement("div",{className:"sidebar-item",key:e,onClick:function(){return n.props.addNewNode(t)}},i.a.createElement("div",{className:"sidebar-item__name"},t.name),i.a.createElement("div",{className:"sidebar-item__svg"},i.a.createElement(v.a,{src:"assets/".concat(t.svg)})))})))}}]),e}(o.Component),O=function(n){Object(u.a)(e,n);var t=Object(d.a)(e);function e(){var n;Object(a.a)(this,e);for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return(n=t.call.apply(t,[this].concat(r))).state={desktopX:0,desktopY:0},n.mouseStartPos=null,n.desktopRef=i.a.createRef(),n.mouseDown=function(t,e,o){1===o&&(n.mouseStartPos={x:t,y:e,desktopX:n.state.desktopX,desktopY:n.state.desktopY})},n.mouseMove=function(t,e){if(null!==n.mouseStartPos){var o=n.mouseStartPos,i=o.x,r=o.y,s=o.desktopX,a=o.desktopY;n.setState({desktopX:s-(i-t),desktopY:a-(r-e)})}},n.mouseUp=function(){n.mouseStartPos=null},n.addNewNode=function(t){n.desktopRef.current.addNewNode(t)},n}return Object(c.a)(e,[{key:"render",value:function(){var n=this;return i.a.createElement("div",{className:"app",onMouseDown:function(t){return n.mouseDown(t.clientX,t.clientY,t.button)},onMouseMove:function(t){return n.mouseMove(t.clientX,t.clientY)},onMouseUp:function(){return n.mouseUp()}},i.a.createElement(w,{position:{x:this.state.desktopX,y:this.state.desktopY},ref:this.desktopRef}),i.a.createElement(E,{addNewNode:function(t){return n.addNewNode(t)}}))}}]),e}(o.Component),b=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(n,t){navigator.serviceWorker.register(n).then((function(n){n.onupdatefound=function(){var e=n.installing;null!=e&&(e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(n)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(n)))})}})).catch((function(n){console.error("Error during service worker registration:",n)}))}s.a.render(i.a.createElement(O,null),document.getElementById("root")),function(n){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");b?(!function(n,t){fetch(n,{headers:{"Service-Worker":"script"}}).then((function(e){var o=e.headers.get("content-type");404===e.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(n){n.unregister().then((function(){window.location.reload()}))})):k(n,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,n),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):k(t,n)}))}}()}},[[21,1,2]]]);
//# sourceMappingURL=main.ea08b2e1.chunk.js.map